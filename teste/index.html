<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Acesso Ivi MK</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="card">
    <h2>Bem-vinda à Ivi MK</h2>
    <p>Digite o mesmo e-mail que você informou no formulário após a compra.</p>

    <input
      id="email"
      type="email"
      placeholder="seuemail@exemplo.com"
      autocomplete="off"
    />

    <button onclick="entrar()">Entrar</button>

    <p class="note" id="mensagem"></p>
  </div>

  <script>
    // COLE AQUI A URL DO SEU SCRIPT
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyzO8QajmyzZNsVQVwVfVab843WrLEo_5d4Re3gYULELZh0S1SHZZ869dI9ZevOmS7d/exec";

    const IVI_URL =
      "https://chatgpt.com/g/g-692cda6e89888191a5a932e29159bafe-teste-iniciadora-virtual-mk-ivi";

    async function entrar() {
      const emailInput = document.getElementById("email");
      const msg = document.getElementById("mensagem");

      const email = (emailInput.value || "").trim().toLowerCase();

      if (!email) {
        msg.textContent = "Por favor, informe seu e-mail.";
        msg.style.color = "#b00020";
        return;
      }

      msg.textContent = "Verificando seu acesso, aguarde...";
      msg.style.color = "#7b3b4a";

      try {
        const url = SCRIPT_URL + "?email=" + encodeURIComponent(email);
        const resp = await fetch(url);
        const data = await resp.json();

        if (data.ok) {
          msg.textContent = "Acesso liberado! Redirecionando para a Ivi...";
          msg.style.color = "#2e7d32";
          setTimeout(() => {
            window.location.href = IVI_URL;
          }, 800);
        } else {
          msg.textContent =
            "Não encontramos este e-mail na lista de acesso. Verifique se digitou corretamente ou fale com sua consultora.";
          msg.style.color = "#b00020";
        }
      } catch (e) {
        console.error(e);
        msg.textContent =
          "Ocorreu um erro ao validar seu acesso. Tente novamente em alguns minutos.";
        msg.style.color = "#b00020";
      }
    }
  </script>
</body>
</html>


